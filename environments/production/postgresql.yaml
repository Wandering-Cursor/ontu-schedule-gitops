# Production Environment Configuration for PostgreSQL

# Image configuration - use specific version tags in production
image:
  repository: postgres
  tag: "15.4-alpine"
  pullPolicy: IfNotPresent

# Database credentials
# IMPORTANT: Override with SealedSecrets in production!
auth:
  username: postgres
  # This password should be replaced with a SealedSecret
  password: "REPLACE_WITH_SEALED_SECRET"
  database: ontu_schedule

# Persistence - enabled for production
persistence:
  enabled: true
  # Specify storage class for your cluster
  storageClass: ""  # Use default or specify: "gp2", "standard", etc.
  size: 20Gi
  accessMode: ReadWriteOnce

# Production resource limits
resources:
  requests:
    cpu: 500m
    memory: 512Mi
  limits:
    cpu: 2000m
    memory: 2Gi

# Service configuration
service:
  type: ClusterIP
  port: 5432

# PostgreSQL configuration optimized for production
postgresqlConfig:
  max_connections: "200"
  shared_buffers: "256MB"
  effective_cache_size: "1GB"
  work_mem: "4MB"
  maintenance_work_mem: "64MB"

# Enable metrics for monitoring
metrics:
  enabled: true
