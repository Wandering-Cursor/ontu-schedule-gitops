# Production Environment Configuration for ONTU Schedule Bot

# Application image - use specific tags in production
image:
  repository: ghcr.io/wandering-cursor/ontu-schedule-bot
  # IMPORTANT: Replace 'latest' with specific version tag
  tag: "v1.0.0"  # Change to your actual version
  pullPolicy: Always

# Number of replicas
# Note: For Telegram bots, usually 1 replica is sufficient
# If using webhooks instead of polling, you can scale horizontally
replicaCount: 1

# Service configuration
service:
  type: ClusterIP
  port: 8080
  targetPort: 8080

# Ingress - typically not needed for bots using long polling
# Enable if using webhooks
ingress:
  enabled: false
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - host: bot-webhook.ontu-schedule.example.com  # CHANGE THIS if using webhooks
      paths:
        - path: /webhook
          pathType: Prefix
  tls:
    - secretName: ontu-schedule-bot-tls
      hosts:
        - bot-webhook.ontu-schedule.example.com

# Production resource limits
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Admin backend configuration
adminBackend:
  # Service name of the admin backend
  host: "ontu-schedule-bot-admin"
  port: 8080
  protocol: "http"
  apiPath: "/api/v1"
  timeout: 30

# Bot configuration
bot:
  # IMPORTANT: Use SealedSecret for bot token!
  useExternalSecret: true
  externalSecretName: "ontu-schedule-bot-token"
  tokenKey: "token"

# Production environment variables
env:
  APP_ENV: "production"
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  # Polling interval in seconds (if using long polling)
  POLLING_INTERVAL: "1"
  # Add your custom environment variables here

# Health check configuration
healthCheck:
  livenessPath: /health/live
  readinessPath: /health/ready
  initialDelaySeconds: 20
  periodSeconds: 10

# Autoscaling - typically disabled for bots using long polling
# Enable if using webhooks and need to handle high load
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80

# Pod disruption budget - disabled for single replica
podDisruptionBudget:
  enabled: false
  minAvailable: 1
